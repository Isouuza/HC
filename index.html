<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Anamnese Interativa</title>
<style>
    body { font-family: Arial, sans-serif; background: #111; color: white; padding: 20px; }
    .pergunta { margin-top: 20px; }
    button { margin: 5px; padding: 10px; font-size: 16px; }
    #resultado { background: #222; padding: 20px; margin-top: 20px; border-radius: 8px; }
</style>
</head>
<body>

<h1>Anamnese Interativa</h1>
<div id="app"></div>

<script>
const perguntas = {
    inicio: [
        {tipo: 'texto', chave: 'nome', texto: 'Qual o nome do paciente?'},
        {tipo: 'numero', chave: 'idade', texto: 'Qual a idade do paciente?'},
        {tipo: 'opcao', chave: 'motivo', texto: 'Qual o motivo da consulta?', opcoes: ['Dor', 'Febre', 'Vômito', 'Diarreia']}
    ],
    Dor: [
        {tipo: 'texto', chave: 'aparecimento', texto: 'Quando começou a dor?'},
        {tipo: 'texto', chave: 'localizacao', texto: 'Onde está localizada a dor?'},
        {tipo: 'texto', chave: 'irradiacao', texto: 'A dor irradia para algum lugar?'},
        {tipo: 'texto', chave: 'caracter', texto: 'Qual o caráter da dor?'},
        {tipo: 'texto', chave: 'intensidade', texto: 'Qual a intensidade da dor?'},
        {tipo: 'texto', chave: 'atenuantes', texto: 'Algo atenua ou agrava a dor?'}
    ],
    Febre: [
        {tipo: 'texto', chave: 'aparecimento', texto: 'Quando começou a febre?'},
        {tipo: 'texto', chave: 'quantofebre', texto: 'Qual a temperatura medida?'},
        {tipo: 'texto', chave: 'continua', texto: 'A febre é contínua ou descontínua?'},
        {tipo: 'texto', chave: 'medicacao', texto: 'Está usando alguma medicação?'},
        {tipo: 'texto', chave: 'melhora', texto: 'Houve melhora com medicamentos?'},
        {tipo: 'texto', chave: 'sintomas', texto: 'Há outros sintomas?'}
    ],
    "Vômito": [
        {tipo: 'texto', chave: 'aparecimento', texto: 'Quando começaram os vômitos?'},
        {tipo: 'texto', chave: 'vezes', texto: 'Quantas vezes por dia?'},
        {tipo: 'texto', chave: 'conteudo', texto: 'Qual o conteúdo do vômito?'},
        {tipo: 'texto', chave: 'volumen', texto: 'Qual o volume aproximado?'},
        {tipo: 'texto', chave: 'cor', texto: 'Qual a cor do vômito?'},
        {tipo: 'texto', chave: 'relacao', texto: 'Está relacionado com alimentação?'},
        {tipo: 'texto', chave: 'acompanha', texto: 'Há outros sintomas associados?'}
    ],
    Diarreia: [
        {tipo: 'texto', chave: 'aparecimento', texto: 'Quando começou a diarreia?'},
        {tipo: 'texto', chave: 'vezes', texto: 'Quantas evacuações por dia?'},
        {tipo: 'texto', chave: 'conteudo', texto: 'Qual a consistência das fezes?'},
        {tipo: 'texto', chave: 'volumen', texto: 'Qual o volume aproximado?'},
        {tipo: 'texto', chave: 'cor', texto: 'Qual a cor das fezes?'},
        {tipo: 'texto', chave: 'relacao', texto: 'Está relacionada com alimentação?'},
        {tipo: 'texto', chave: 'acompanha', texto: 'Há outros sintomas associados?'}
    ]
};

let respostas = {};
let etapa = 0;
let fluxo = perguntas.inicio;

function mostrarPergunta() {
    const app = document.getElementById('app');
    app.innerHTML = '';
    if (etapa >= fluxo.length) {
        if (fluxo === perguntas.inicio) {
            fluxo = perguntas[respostas.motivo];
            etapa = 0;
            mostrarPergunta();
        } else {
            mostrarResultado();
        }
        return;
    }

    let p = fluxo[etapa];
    let div = document.createElement('div');
    div.className = 'pergunta';
    let label = document.createElement('label');
    label.innerText = p.texto;
    div.appendChild(label);

    if (p.tipo === 'texto' || p.tipo === 'numero') {
        let input = document.createElement('input');
        input.type = p.tipo === 'numero' ? 'number' : 'text';
        input.onchange = () => { respostas[p.chave] = input.value; };
        div.appendChild(input);
    } else if (p.tipo === 'opcao') {
        p.opcoes.forEach(op => {
            let btn = document.createElement('button');
            btn.innerText = op;
            btn.onclick = () => { respostas[p.chave] = op; etapa++; mostrarPergunta(); };
            div.appendChild(btn);
        });
    }

    if (p.tipo !== 'opcao') {
        let btn = document.createElement('button');
        btn.innerText = 'Próximo';
        btn.onclick = () => { etapa++; mostrarPergunta(); };
        div.appendChild(btn);
    }

    app.appendChild(div);
}

function mostrarResultado() {
    const app = document.getElementById('app');
    app.innerHTML = '<h2>Resumo da Anamnese</h2>';
    let div = document.createElement('div');
    div.id = 'resultado';
    for (let chave in respostas) {
        div.innerHTML += `<strong>${chave}:</strong> ${respostas[chave]}<br>`;
    }
    app.appendChild(div);
}

mostrarPergunta();
</script>

</body>
</html>
